<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<exportmultiplex category="Template" ref_path="workflow_data[Internal]/storable[workflow_data]/storable[Data]">
   <list classname="java.util.ArrayList" name="Comments"/>
   <storable name="Execution Config" storable-id="dr.WorkflowExecutionConfig" ver="10.0">
      <enum name="debugType" storable-id="dr.DebugType" value="EVENT"/>
      <storable name="executionSettings" storable-id="dr.ExecutionSettings" ver="11.0">
         <boolean name="enabled" value="false"/>
         <storable name="kafka" null="true"/>
      </storable>
      <int name="noOfFilesToKeep" value="0"/>
      <string name="throughputMIM" null="true"/>
      <string name="txnHandler" value="Default Handler"/>
   </storable>
   <list classname="java.util.ArrayList" name="Field Types"/>
   <list classname="java.util.ArrayList" name="Logged error MIM"/>
   <list classname="java.util.ArrayList" name="Nodes">
      <storable name="0" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname"><![CDATA[com.digitalroute.http2.server.agent.Http2ServerInsp]]></string>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="1">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname"><![CDATA[com.digitalroute.http2.server.agent.Http2ServerInsp]]></string>
               <storable name="Data" storable-id="dr.HTTP2ServerData" ver="12.1">
                  <enum classname="com.digitalroute.http2.server.auth.AuthLevel" name="authLevel" value="NONE"/>
                  <string name="authPublicKey" null="true"/>
                  <int name="averagePeriod" value="10"/>
                  <string name="characterEncoding" value="UTF-8"/>
                  <int name="clientTimeout" value="10"/>
                  <boolean name="enableTooManyRequests" value="false"/>
                  <int name="gzipLevel" value="7"/>
                  <string name="host" value="192.168.2.100"/>
                  <boolean name="isTwoWayAuth" value="false"/>
                  <int name="maxConcurrentStreams" value="500"/>
                  <int name="numberOfRequests" value="1000"/>
                  <int name="port" value="8094"/>
                  <boolean name="routeToApl" value="false"/>
                  <storable name="securityProfile" null="true"/>
                  <int name="serverTimeout" value="0"/>
                  <list classname="java.util.ArrayList" name="strategies">
                     <storable name="0" storable-id="dr.HTTP2.OpenAPI" ver="10.4">
                        <storable name="configuration" null="true"/>
                        <string name="contentType429" value="application/problem+json"/>
                        <string name="contentType503" value="application/problem+json"/>
                        <list name="openApiProfileList" null="true"/>
                        <boolean name="overrideError429" value="false"/>
                        <boolean name="overrideError503" value="false"/>
                        <int name="statusCode429" value="429"/>
                        <int name="statusCode503" value="503"/>
                        <list name="udrFieldsMap429" null="true"/>
                        <list name="udrFieldsMap503" null="true"/>
                        <storable name="udrTypeIdentifier429" null="true"/>
                        <storable name="udrTypeIdentifier503" null="true"/>
                        <boolean name="useOpenApi" value="false"/>
                        <boolean name="validate" value="false"/>
                     </storable>
                     <storable name="1" storable-id="dr.HTTP2.Support5G" ver="10.4">
                        <storable name="configuration" null="true"/>
                        <boolean name="enableFallBack" value="false"/>
                        <boolean name="enableRegistrationRetry" value="false"/>
                        <string name="nrfAddress" null="true"/>
                        <array classname="java.lang.String" name="nrfAddresses" size="0"/>
                        <int name="numberOfRegistrationRetry" value="0"/>
                        <list classname="java.util.ArrayList" name="openApiProfileList"/>
                        <array name="secondaryAddress" null="true"/>
                        <array classname="java.lang.String" name="secondaryAddressList" size="0"/>
                        <int name="timeIntervalForRegistrationRetry" value="0"/>
                        <boolean name="use5g" value="false"/>
                     </storable>
                  </list>
                  <storable name="udrType" null="true"/>
                  <boolean name="useSSL" value="false"/>
                  <int name="waitDuration" value="10"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="HTTP2_Server_1"/>
      </storable>
      <storable name="1" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname" value="com.digitalroute.wfc.analysis.AnalysisRealtimeInsp"/>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="1">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.wfc.analysis.AnalysisRealtimeInsp"/>
               <storable name="Data" storable-id="dr.StuffyMapperData" ver="10.0">
                  <string name="sourceCode"><![CDATA[boolean i = false;
consume {
    if(instanceOf(input,RequestCycle)){
        debug("Input:"+input);
        if(input.context == null){
            RequestCycle ip = udrClone((RequestCycle)input);
            debug("Request received..");
            if(i == false){
                ip.clientPort = 8095; 
                toggle(true);
            }else{
                 toggle(false);
                 ip.clientPort = 8096; 
            }   
            ip.clientHost = "192.168.2.100";
            ip.context = input;
            udrRoute(ip,"r_5");
        }else{
            debug("Response received..");
            RequestCycle res = (RequestCycle)input;
            RequestCycle req = (RequestCycle)res.context;
            
            req.response = res.response;
            udrRoute(req,"r_6");
            
        }
        
    }
}
synchronized void toggle(boolean val){
    i=val;    
}]]></string>
                  <array classname="com.digitalroute.devkit.drudr.DRTypeInfo" name="udrTypes" size="1">
                     <storable name="0" storable-id="dr.DRTypeInfo" ver="1.0">
                        <string name="TypeName" value="http.RequestCycle"/>
                     </storable>
                  </array>
               </storable>
            </storable>
         </array>
         <string name="Name" value="Analysis_1"/>
      </storable>
      <storable name="2" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname"><![CDATA[com.digitalroute.http2.client.agent.Http2ClientInsp]]></string>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="1">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname"><![CDATA[com.digitalroute.http2.client.agent.Http2ClientInsp]]></string>
               <storable name="Data" storable-id="dr.HTTP2ClientData" ver="22.0">
                  <string name="accessTokenUri" null="true"/>
                  <list name="additionalParametersList" null="true"/>
                  <enum name="authenticationType" storable-id="dr.AuthenticationType" value="NONE"/>
                  <enum name="clientAuthType" storable-id="dr.OAuthClientAuthType" value="CLIENT_SECRET_BASICS"/>
                  <string name="clientId" null="true"/>
                  <password name="clientSecret" null="true"/>
                  <int name="expirationOverride" value="0"/>
                  <enum name="grantType" storable-id="dr.GrantType" value="CREDENTIALS"/>
                  <string name="hnrfAccessTokenUri" null="true"/>
                  <int name="maxPushedConcurrentStreams" value="1000"/>
                  <int name="maxRequestsQueuedPerDestination" value="20000"/>
                  <int name="minConnectionCheckInterval" value="30"/>
                  <int name="minConnections" value="0"/>
                  <int name="monitorPingInterval" value="10"/>
                  <string name="nfInstanceId" null="true"/>
                  <string name="nfType" null="true"/>
                  <string name="nrfTokenEndpointURI" null="true"/>
                  <string name="overrideBaseURL" null="true"/>
                  <password name="password" null="true"/>
                  <int name="queueFullMaxRetries" value="10"/>
                  <int name="queueFullRetryInterval" value="50"/>
                  <int name="requestTimeout" value="30"/>
                  <string name="requesterFqdn" null="true"/>
                  <storable name="requesterPlmn" null="true"/>
                  <string name="requesterPlmnCustomized" null="true"/>
                  <list name="requesterPlmnList" null="true"/>
                  <string name="requesterPlmnListCustomized" null="true"/>
                  <list name="requesterSnpnList" null="true"/>
                  <string name="requesterSnpnListCustomized" null="true"/>
                  <list name="requesterSnssaiList" null="true"/>
                  <string name="requesterSnssaiListCustomized" null="true"/>
                  <boolean name="routeErrorUdr" value="false"/>
                  <string name="scope" null="true"/>
                  <storable name="securityProfile" null="true"/>
                  <storable name="securityProfileNRF" null="true"/>
                  <string name="sourceNfInstanceId" null="true"/>
                  <list classname="java.util.ArrayList" name="strategies">
                     <storable name="0" storable-id="dr.HTTP2.OpenAPI" ver="10.4">
                        <storable name="configuration" null="true"/>
                        <string name="contentType429" value="application/problem+json"/>
                        <string name="contentType503" value="application/problem+json"/>
                        <list name="openApiProfileList" null="true"/>
                        <boolean name="overrideError429" value="false"/>
                        <boolean name="overrideError503" value="false"/>
                        <int name="statusCode429" value="429"/>
                        <int name="statusCode503" value="503"/>
                        <list name="udrFieldsMap429" null="true"/>
                        <list name="udrFieldsMap503" null="true"/>
                        <storable name="udrTypeIdentifier429" null="true"/>
                        <storable name="udrTypeIdentifier503" null="true"/>
                        <boolean name="useOpenApi" value="false"/>
                        <boolean name="validate" value="false"/>
                     </storable>
                  </list>
                  <string name="targetNfInstanceId" null="true"/>
                  <string name="targetNfServiceSetId" null="true"/>
                  <string name="targetNfSetId" null="true"/>
                  <string name="targetNfType" null="true"/>
                  <list name="targetNsiList" null="true"/>
                  <string name="targetNsiListCustomized" null="true"/>
                  <storable name="targetPlmn" null="true"/>
                  <string name="targetPlmnCustomized" null="true"/>
                  <storable name="targetSnpn" null="true"/>
                  <string name="targetSnpnCustomized" null="true"/>
                  <list name="targetSnssaiList" null="true"/>
                  <string name="targetSnssaiListCustomized" null="true"/>
                  <boolean name="useSSL" value="false"/>
                  <boolean name="useSSLNRF" value="false"/>
                  <boolean name="useServerMonitor" value="false"/>
                  <string name="username" null="true"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="HTTP2_Client_1"/>
      </storable>
   </list>
   <storable name="Persistent" storable-id="dr.WorkflowPersistentConfig" ver="10.0">
      <string name="persistentInspector" null="true"/>
      <storable name="persistentStorageConfig" null="true"/>
      <string name="persistentTimeoutHandler" null="true"/>
   </storable>
   <list classname="java.util.ArrayList" name="Routes">
      <storable name="0" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="r_1"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="1" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="r_3"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="2" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="r_5"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="3" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="r_6"/>
         <int name="Realtime mode" value="0"/>
      </storable>
   </list>
   <list classname="java.util.ArrayList" name="Service"/>
   <boolean name="Template Valid" value="true"/>
   <storable name="Thread data" storable-id="dr.WorkflowExecutionRealtimeConfig" ver="10.0">
      <int name="countInterval" value="1"/>
      <int name="queueSize" value="1000"/>
      <string name="queueStrategy" null="true"/>
      <string name="queueWorkerStrategy" null="true"/>
      <boolean name="standalone" value="false"/>
      <int name="threads" value="8"/>
   </storable>
</exportmultiplex>
