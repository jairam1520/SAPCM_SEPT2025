<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<exportmultiplex category="Template" ref_path="workflow_data[Internal]/storable[workflow_data]/storable[Data]">
   <storable name="Audit Profile" null="true"/>
   <int name="Cancel batch count" value="0"/>
   <int name="Cancel batch type" value="0"/>
   <list classname="java.util.ArrayList" name="Comments"/>
   <storable name="Data Veracity Profile" null="true"/>
   <storable name="Error UDR type name" null="true"/>
   <boolean name="Error batch type" value="false"/>
   <string name="Error code" null="true"/>
   <map name="Error map" null="true"/>
   <storable name="Execution Config" storable-id="dr.WorkflowExecutionConfig" ver="10.0">
      <enum name="debugType" storable-id="dr.DebugType" value="EVENT"/>
      <storable name="executionSettings" storable-id="dr.ExecutionSettings" ver="11.0">
         <boolean name="enabled" value="false"/>
         <storable name="kafka" null="true"/>
      </storable>
      <int name="noOfFilesToKeep" value="0"/>
      <string name="throughputMIM" null="true"/>
      <string name="txnHandler" value="Default Handler"/>
   </storable>
   <list classname="java.util.ArrayList" name="Field Types"/>
   <boolean name="Log On CB" value="false"/>
   <list classname="java.util.ArrayList" name="Logged error MIM"/>
   <list classname="java.util.ArrayList" name="Nodes">
      <storable name="0" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname" value="com.digitalroute.wfc.diskinput.DiskAdvInputInsp"/>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="3">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.wfc.diskinput.DiskAdvInputInsp"/>
               <storable name="Data" storable-id="dr.DiskAdvInputData" ver="10.0">
                  <string name="collectionStrategyName" null="true"/>
                  <boolean name="routeFileRef" value="false"/>
                  <array classname="java.lang.String" name="strategyClasses" size="2">
                     <string name="0" value="com.digitalroute.misc.advcoll.impl.DefaultFileInfo"/>
                     <string name="1"><![CDATA[com.digitalroute.misc.advcoll.impl.DefaultSourceFileHandling]]></string>
                  </array>
                  <string name="strategyCombinationClass"><![CDATA[com.digitalroute.misc.advcoll.impl.DefaultCollectionStrategy]]></string>
                  <array classname="java.lang.Object" name="strategyConfigs" size="2">
                     <storable name="0" storable-id="dr.DefaultFileInfoConfig" ver="10.0">
                        <string name="baseDir" value="/opt/mz/SAPCM-SEPT25/Functions"/>
                        <enum name="compType" storable-id="dr.CompressionType" value="NONE"/>
                        <string name="fileRegExp" value="Usage_telco.csv"/>
                        <boolean name="subfolders" value="false"/>
                     </storable>
                     <storable name="1" storable-id="dr.DefaultSourceFileHandlingConfig" ver="10.0">
                        <int name="idleTime" value="0"/>
                        <boolean name="moveBeforeRetrieval" value="false"/>
                        <string name="moveSuffix" value=""/>
                        <string name="rbDirectory" value=""/>
                        <int name="rbKeepInterval" value="-1"/>
                        <string name="rbRenamePrefix" value=""/>
                        <string name="rbRenameSuffix" value=""/>
                        <string name="rbReplace" value=""/>
                        <string name="rbSearch" value=""/>
                        <enum name="rbType" storable-id="dr.RetrievalType" value="IGNORE"/>
                     </storable>
                  </array>
               </storable>
            </storable>
            <storable name="1" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.devkit.wf.DRFNSServiceInsp"/>
               <storable name="Data" storable-id="dr.DRFNSServiceConfigExtension" ver="10.0">
                  <boolean name="enabled" value="false"/>
                  <storable name="nextSeqNo" storable-id="dr.SequenceNumberFieldValue" ver="2.0">
                     <long name="SeqNo" value="-1"/>
                     <long name="SeqNoUpdate" value="0"/>
                  </storable>
                  <long name="nextSeqNoValue" value="-1"/>
                  <long name="seqNoChk" value="0"/>
                  <int name="seqNoLen" value="-1"/>
                  <boolean name="shallWarnOnOutOfSequence" value="false"/>
                  <int name="startPos" value="-1"/>
                  <long name="wrapOnSeqNo" value="-1"/>
                  <long name="wrapToSeqNo" value="-1"/>
               </storable>
            </storable>
            <storable name="2" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname"><![CDATA[com.digitalroute.devkit.wf.DRFileInfoSortOrderServiceInsp]]></string>
               <storable name="Data" storable-id="dr.DRFileInfoSortOrderServiceConfig" ver="10.0">
                  <boolean name="enabled" value="false"/>
                  <boolean name="ignoreCase" value="false"/>
                  <int name="length" value="0"/>
                  <enum name="orderType" storable-id="dr.DRFileOrderType" value="FILENAME_VALUE"/>
                  <enum name="patternType" storable-id="dr.DRFilenamePatternSelection" value="POSITION"/>
                  <string name="regExp" null="true"/>
                  <enum name="sortOrder" storable-id="dr.DRSortOrder" value="ASCENDING"/>
                  <enum name="sortType" storable-id="dr.DRFilenameSortType" value="ALPHANUMERIC"/>
                  <int name="startPos" value="0"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="Disk_1"/>
      </storable>
      <storable name="1" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname" value="com.digitalroute.wfc.ultra.UltraDecoderInsp"/>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="1">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.wfc.ultra.UltraDecoderInsp"/>
               <storable name="Data" storable-id="dr.UltraDecoderData" ver="11.0">
                  <object name="decoderConfig">
                     <null name="Object Internal"/>
                  </object>
                  <string name="decoderName"><![CDATA[SAPCM-SEPT25_APL-BASICS_FUNCTIONS.UFL_USG_IP.usgDec]]></string>
                  <boolean name="doFullDecode" value="false"/>
                  <int name="errorMode" value="1"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="Decoder_1"/>
      </storable>
      <storable name="2" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname" value="com.digitalroute.wfc.analysis.StuffyMapperInsp"/>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="2">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.wfc.analysis.StuffyMapperInsp"/>
               <storable name="Data" storable-id="dr.StuffyMapperData" ver="10.0">
                  <string name="sourceCode"><![CDATA[import ultra.SAPCM-SEPT25_APL-BASICS_FUNCTIONS.UFL_USG_OP;
consume {

     //2025-09-30 23:55:00
     strToDate(input.dtStartTime , input.startTime ,"yyyy-MM-dd HH:mm:ss");
     //debug(input);
     
     usageOut_TI usageOut = createUsageOpRec(input);
     debug(usageOut);
     udrRoute(usageOut);
    
}
usageOut_TI createUsageOpRec(usage_int ip){
    usageOut_TI usageOut = udrCreate(usageOut_TI);
    usageOut.subsId = ip.subsId;
    usageOut.usageType = ip.usageType;
    usageOut.startTime = ip.startTime;
    
    //derive end time
    int iDurSec;
    strToInt(iDurSec,ip.durSec);
    date dtEndTime = dateCreateCopy(ip.dtStartTime);
    dateAddSeconds(dtEndTime , iDurSec);
    usageOut.endTime = (string)dtEndTime;
    
    usageOut.year = (string)dateGetYear(ip.dtStartTime);
    usageOut.month = (string)dateGetMonth(ip.dtStartTime);
    usageOut.dayOfWeek = (string)dateGetDayOfWeek(ip.dtStartTime);
    usageOut.millisStart = (string)dateGetAsMilliseconds(ip.dtStartTime);
    
    list<string> liStartDate = strSplit(ip.startTime," ");
    string strDateWithoutTime = listGet(liStartDate,0);
    date dtCycleSt;
    debug(strToDate(dtCycleSt ,strDateWithoutTime , "yyyy-MM-dd"));
    dateSetDay(dtCycleSt,1);
    usageOut.cyclePeriod =  ""+ dtCycleSt + "to ";
    
    usageOut.peakOrOffpeak = (dateGetHours24(ip.dtStartTime) >= 18 && dateGetHours24(ip.dtStartTime) <= 2) ?"Peak" :"Off-Peak"; 
    usageOut.leapyear = (string)dateIsLeapYear(ip.dtStartTime);
    debug(dateCreateNowMilliseconds());
    return usageOut;
    
}]]></string>
                  <array classname="com.digitalroute.devkit.drudr.DRTypeInfo" name="udrTypes" size="1">
                     <storable name="0" storable-id="dr.UltraClientInfo" ver="1.0">
                        <string name="FormatName" value="SAPCM-SEPT25_APL-BASICS_FUNCTIONS.UFL_USG_IP"/>
                        <string name="TypeName"><![CDATA[SAPCM-SEPT25_APL-BASICS_FUNCTIONS.UFL_USG_IP.usage_int]]></string>
                     </storable>
                  </array>
               </storable>
            </storable>
            <storable name="1" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.devkit.hidden.DRThreadBufferInsp"/>
               <storable name="Data" storable-id="dr.DRThreadBufferConfig" ver="10.0">
                  <boolean name="printStats" value="false"/>
                  <boolean name="useOwnThread" value="false"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="Analysis_1"/>
      </storable>
      <storable name="3" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname" value="com.digitalroute.wfc.ultra.UltraEncoderInsp"/>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="4">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.wfc.ultra.UltraEncoderInsp"/>
               <storable name="Data" storable-id="dr.UltraEncoderData" ver="12.0">
                  <storable name="encoderConfig" null="true"/>
                  <string name="encoderName" value="SAPCM-SEPT25_APL-BASICS_FUNCTIONS.UFL_USG_OP.uEnc"/>
                  <boolean name="skipEncoding" value="false"/>
               </storable>
            </storable>
            <storable name="1" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.devkit.hidden.DRHeaderServiceInsp"/>
               <storable name="Data" storable-id="dr.HeaderTrailerConfig" ver="10.0">
                  <array classname="com.digitalroute.devkit.hidden.HeaderTrailerEntry" name="entries" size="12">
                     <storable name="0" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="0"/>
                        <int name="Size" value="13"/>
                        <string name="User entry" value="SubscriberID,"/>
                     </storable>
                     <storable name="1" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="0"/>
                        <int name="Size" value="10"/>
                        <string name="User entry" value="UsageType,"/>
                     </storable>
                     <storable name="10" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="0"/>
                        <int name="Size" value="8"/>
                        <string name="User entry" value="LeapYear"/>
                     </storable>
                     <storable name="11" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="10"/>
                        <int name="Size" value="1"/>
                        <string name="User entry" null="true"/>
                     </storable>
                     <storable name="2" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="0"/>
                        <int name="Size" value="10"/>
                        <string name="User entry" value="StartTime,"/>
                     </storable>
                     <storable name="3" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="0"/>
                        <int name="Size" value="8"/>
                        <string name="User entry" value="EndTime,"/>
                     </storable>
                     <storable name="4" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="0"/>
                        <int name="Size" value="5"/>
                        <string name="User entry" value="Year,"/>
                     </storable>
                     <storable name="5" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="0"/>
                        <int name="Size" value="6"/>
                        <string name="User entry" value="Month,"/>
                     </storable>
                     <storable name="6" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="0"/>
                        <int name="Size" value="10"/>
                        <string name="User entry" value="DayOfWeek,"/>
                     </storable>
                     <storable name="7" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="0"/>
                        <int name="Size" value="12"/>
                        <string name="User entry" value="MillisStart,"/>
                     </storable>
                     <storable name="8" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="0"/>
                        <int name="Size" value="12"/>
                        <string name="User entry" value="CyclePeriod,"/>
                     </storable>
                     <storable name="9" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="0"/>
                        <int name="Size" value="14"/>
                        <string name="User entry" value="PeakOrOffPeak,"/>
                     </storable>
                  </array>
                  <boolean name="suppress" value="false"/>
               </storable>
            </storable>
            <storable name="2" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname"><![CDATA[com.digitalroute.devkit.hidden.DRTrailerServiceInsp]]></string>
               <storable name="Data" storable-id="dr.HeaderTrailerConfig" ver="10.0">
                  <array classname="com.digitalroute.devkit.hidden.HeaderTrailerEntry" name="entries" size="2">
                     <storable name="0" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="0"/>
                        <int name="Size" value="7"/>
                        <string name="User entry" value="Trailer"/>
                     </storable>
                     <storable name="1" storable-id="dr.HeaderTrailerEntry" ver="1.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <string name="MIM entry" null="true"/>
                        <char name="Padding" value="10"/>
                        <int name="Size" value="1"/>
                        <string name="User entry" null="true"/>
                     </storable>
                  </array>
                  <boolean name="suppress" value="false"/>
               </storable>
            </storable>
            <storable name="3" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.devkit.hidden.DRThreadBufferInsp"/>
               <storable name="Data" storable-id="dr.DRThreadBufferConfig" ver="10.0">
                  <boolean name="printStats" value="false"/>
                  <boolean name="useOwnThread" value="false"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="Encoder_1"/>
      </storable>
      <storable name="4" storable-id="dr.WfNode" ver="2.0">
         <string name="Classname" value="com.digitalroute.wfc.diskoutput.DiskOutputInsp"/>
         <array classname="com.digitalroute.wf.WfNodeConfig" name="Configuration" size="2">
            <storable name="0" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.wfc.diskoutput.DiskOutputInsp"/>
               <storable name="Data" storable-id="dr.DiskOutputData" ver="13.0">
                  <string name="arguments" value=""/>
                  <string name="command" value=""/>
                  <enum name="compType" storable-id="dr.CompressionType" value="NONE"/>
                  <boolean name="createEmpty" value="false"/>
                  <boolean name="createNonExistingBaseDir" value="false"/>
                  <string name="directory" value="/opt/mz/SAPCM-SEPT25/Functions"/>
                  <enum name="inputType" storable-id="dr.InputType" value="ByteArray"/>
               </storable>
            </storable>
            <storable name="1" storable-id="dr.WfNodeConfig" ver="1.0">
               <string name="Classname" value="com.digitalroute.devkit.wf.DRFNTServiceInsp"/>
               <storable name="Data" storable-id="dr.DRFNTServiceConfig" ver="11.0">
                  <boolean name="createNonExistDirectories" value="true"/>
                  <array classname="com.digitalroute.devkit.hidden.DRFNTServiceEntry" name="entries" size="2">
                     <storable name="0" storable-id="dr.DRFNTServiceEntry" ver="3.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <boolean name="Delimiter" value="false"/>
                        <string name="Mim entry" null="true"/>
                        <string name="Pad" null="true"/>
                        <int name="Size" value="-1"/>
                        <string name="Trailing separator" value="_"/>
                        <string name="User entry" value="Out"/>
                     </storable>
                     <storable name="1" storable-id="dr.DRFNTServiceEntry" ver="3.0">
                        <int name="Alignment" value="1"/>
                        <string name="Date format" null="true"/>
                        <boolean name="Delimiter" value="false"/>
                        <string name="Mim entry" value="Disk_1.Source Filename"/>
                        <string name="Pad" null="true"/>
                        <int name="Size" value="-1"/>
                        <string name="Trailing separator" null="true"/>
                        <string name="User entry" null="true"/>
                     </storable>
                  </array>
                  <boolean name="fNTListEnabled" value="true"/>
               </storable>
            </storable>
         </array>
         <string name="Name" value="Disk_3"/>
      </storable>
   </list>
   <list classname="java.util.ArrayList" name="Routes">
      <storable name="0" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="r_1"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="1" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="r_2"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="2" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="r_3"/>
         <int name="Realtime mode" value="0"/>
      </storable>
      <storable name="3" storable-id="dr.WfRoute" ver="2.0">
         <string name="Name" value="r_4"/>
         <int name="Realtime mode" value="0"/>
      </storable>
   </list>
   <list classname="java.util.ArrayList" name="Service"/>
   <boolean name="Template Valid" value="true"/>
</exportmultiplex>
